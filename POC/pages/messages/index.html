<div class="messages-page">
    <div class="page-header">
        <h1>Messages</h1>
        <p class="page-subtitle">Chat with your connections</p>
    </div>
    
    <div class="messages-layout">
        <aside class="messages-sidebar">
            <div id="conversations-list" class="conversations-list">
                <div class="spinner"></div>
            </div>
            <p class="messages-hint">
                <a href="#" data-route="/people">Find people</a> to connect and message.
            </p>
        </aside>
        
        <main class="messages-main">
            <div id="thread-empty" class="thread-empty">
                <p>Select a conversation or open a message from a profile.</p>
                <a href="#" data-route="/people" class="btn btn-primary">Browse People</a>
            </div>
            <div id="thread-view" class="thread-view" style="display: none;">
                <div class="thread-header">
                    <a href="#" id="thread-back" class="thread-back" data-route="/messages">‚Üê Back</a>
                    <div class="thread-partner">
                        <span id="thread-partner-name">-</span>
                    </div>
                </div>
                <div id="thread-messages" class="thread-messages">
                    <!-- Messages rendered here -->
                </div>
                <div class="thread-compose">
                    <form id="message-form">
                        <textarea id="message-input" class="form-input" rows="2" placeholder="Type a message..." maxlength="2000"></textarea>
                        <button type="submit" class="btn btn-primary">Send</button>
                    </form>
                </div>
            </div>
        </main>
    </div>
</div>

<style>
.messages-page { width: 100%; max-width: 900px; margin: 0 auto; }
.page-header { margin-bottom: var(--spacing-lg); }
.page-header h1 { font-size: var(--font-size-2xl); margin-bottom: var(--spacing-xs); }
.page-subtitle { color: var(--text-secondary); }
.messages-layout { display: grid; grid-template-columns: 280px 1fr; gap: var(--spacing-lg); min-height: 400px; border: 1px solid var(--border-color); border-radius: var(--radius-lg); overflow: hidden; background: var(--bg-primary); }
.messages-sidebar { border-right: 1px solid var(--border-color); display: flex; flex-direction: column; }
.conversations-list { flex: 1; overflow-y: auto; }
.conversation-item { display: flex; align-items: center; gap: var(--spacing-md); padding: var(--spacing-md) var(--spacing-lg); border-bottom: 1px solid var(--border-color); cursor: pointer; text-decoration: none; color: inherit; }
.conversation-item:hover { background: var(--bg-secondary, #f5f5f5); }
.conversation-item.active { background: var(--bg-secondary, #e8f4fc); }
.conversation-avatar { width: 40px; height: 40px; border-radius: 50%; background: var(--primary-color, #2563eb); color: white; display: flex; align-items: center; justify-content: center; font-weight: 600; flex-shrink: 0; }
.conversation-body { flex: 1; min-width: 0; }
.conversation-name { font-weight: 600; margin-bottom: 2px; }
.conversation-preview { font-size: 0.875rem; color: var(--text-secondary); white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
.conversation-preview-empty { font-style: italic; color: var(--text-secondary, #6b7280); }
.conversation-meta { font-size: 0.75rem; color: var(--text-secondary); margin-top: 2px; }
.conversation-unread { background: var(--primary-color); color: white; font-size: 0.75rem; padding: 2px 6px; border-radius: 10px; margin-left: auto; }
.messages-hint { padding: var(--spacing-md); font-size: 0.875rem; color: var(--text-secondary); border-top: 1px solid var(--border-color); }
.messages-hint a { color: var(--primary-color); }
.messages-main { display: flex; flex-direction: column; min-height: 350px; }
.thread-empty { flex: 1; display: flex; flex-direction: column; align-items: center; justify-content: center; padding: var(--spacing-xl); text-align: center; color: var(--text-secondary); }
.thread-empty p { margin-bottom: var(--spacing-md); }
.thread-view { flex: 1; display: flex; flex-direction: column; min-height: 0; }
.thread-header { padding: var(--spacing-md) var(--spacing-lg); border-bottom: 1px solid var(--border-color); display: flex; align-items: center; gap: var(--spacing-md); }
.thread-back { color: var(--primary-color); text-decoration: none; font-size: 0.875rem; }
.thread-back:hover { text-decoration: underline; }
.thread-partner { font-weight: 600; }
.thread-messages { flex: 1; overflow-y: auto; padding: var(--spacing-lg); display: flex; flex-direction: column; gap: var(--spacing-sm); }
.thread-message { max-width: 80%; padding: var(--spacing-sm) var(--spacing-md); border-radius: var(--radius-lg); font-size: 0.9375rem; }
.thread-message.sent { align-self: flex-end; background: var(--primary-color); color: white; }
.thread-message.received { align-self: flex-start; background: var(--bg-secondary, #e5e7eb); }
.thread-message-time { font-size: 0.75rem; color: var(--text-secondary); margin-top: 4px; }
.thread-compose { padding: var(--spacing-md); border-top: 1px solid var(--border-color); }
.thread-compose form { display: flex; gap: var(--spacing-sm); align-items: flex-end; }
.thread-compose textarea { flex: 1; resize: none; min-height: 44px; }
.thread-compose button { flex-shrink: 0; }
@media (max-width: 640px) {
    .messages-layout { grid-template-columns: 1fr; }
    .messages-sidebar { max-height: 200px; }
}
</style>
