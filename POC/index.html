<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PMTwin - Construction Collaboration Platform</title>
    <link rel="icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='256' height='256' viewBox='0 0 256 256'%3E%3Cpath d='M224,72H184V40a16,16,0,0,0-16-16H88A16,16,0,0,0,72,40V72H32a8,8,0,0,0,0,16H72v24H32a8,8,0,0,0,0,16H72v24H32a8,8,0,0,0,0,16H72v24a16,16,0,0,0,16,16h80a16,16,0,0,0,16-16V168h32a8,8,0,0,0,0-16H184V128h32a8,8,0,0,0,0-16H184V88h32a8,8,0,0,0,0-16Z' fill='%232563eb' opacity='0.2'/%3E%3Cpath d='M224,72H184V40a16,16,0,0,0-16-16H88A16,16,0,0,0,72,40V72H32a8,8,0,0,0,0,16H72v24H32a8,8,0,0,0,0,16H72v24H32a8,8,0,0,0,0,16H72v24a16,16,0,0,0,16,16h80a16,16,0,0,0,16-16V168h32a8,8,0,0,0,0-16H184V128h32a8,8,0,0,0,0-16H184V88h32a8,8,0,0,0,0-16Z' fill='%232563eb'/%3E%3C/svg%3E">
    
    <!-- Phosphor Icons Duotone -->
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/@phosphor-icons/web@2.1.2/src/duotone/style.css"/>
    
    <!-- Quill Rich Text Editor -->
    <link href="https://cdn.quilljs.com/1.3.6/quill.snow.css" rel="stylesheet">
    <script src="https://cdn.quilljs.com/1.3.6/quill.js"></script>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: {
                            DEFAULT: '#2563eb',
                            dark: '#1e40af',
                            light: '#3b82f6',
                        },
                        secondary: '#10b981',
                        danger: '#ef4444',
                        warning: '#f59e0b',
                        success: '#10b981',
                    },
                    fontFamily: {
                        sans: ['-apple-system', 'BlinkMacSystemFont', 'Segoe UI', 'Roboto', 'Helvetica Neue', 'Arial', 'sans-serif'],
                    },
                    maxWidth: {
                        'container': '1200px',
                    },
                }
            }
        }
    </script>
    
    <!-- Custom styles for legacy components -->
    <link rel="stylesheet" href="assets/css/main.css">
    <style>
        body { margin: 0; padding: 0; }
        #app { min-height: 100vh; display: flex; flex-direction: column; background-color: #f9fafb; }
        #main-content { flex: 1; max-width: 1200px; width: 100%; margin: 0 auto; padding: 2rem 1.5rem; }
        .app-portal-layout { display: none; }
        .app-portal-layout.portal-visible { display: flex; flex: 1; min-height: 0; }
        .app-public-layout { display: flex; flex-direction: column; flex: 1; }
        .app-public-layout.public-visible { display: flex; }
        .app-public-layout:not(.public-visible) { display: none; }
    </style>
</head>
<body class="m-0 p-0 min-h-screen bg-gray-50">
    <div id="app" class="min-h-screen flex flex-col bg-gray-50">
        <!-- Public layout: top nav + full-width main (shown when not authenticated) -->
        <div id="app-public-layout" class="app-public-layout public-visible">
            <nav id="main-nav"></nav>
            <main id="main-content" class="flex-1 max-w-container w-full mx-auto px-6 py-8"></main>
        </div>

        <!-- Portal layout: sidebar + main card (shown when authenticated) -->
        <div id="app-portal-layout" class="app-portal-layout">
            <aside id="app-sidebar"></aside>
            <div id="app-main" class="portal-main">
                <div id="main-content-card" class="portal-card">
                    <div id="main-content-slot" class="portal-content-slot">
                        <!-- #main-content is moved here by layout when authenticated -->
                    </div>
                    <div id="portal-summary" class="portal-summary">
                        <span id="portal-summary-text" class="portal-summary-text"></span>
                        <span id="portal-pagination" class="portal-pagination"></span>
                    </div>
                </div>
            </div>
        </div>

        <footer id="main-footer"></footer>
    </div>

    <script type="module" src="src/core/init/app-init.js"></script>
</body>
</html>
